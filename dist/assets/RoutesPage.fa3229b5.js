import{d as M,q as P,s as D,u as k,l as f,b as c,m as s,p as n,F as m,g as l,o as r,x as R,h as w,a as y,N as v}from"./index.90b462b0.js";import{u as V}from"./ordersStore.2f2132b0.js";import{A as j,P as p,a as d,_ as C}from"./apiService.61d13de6.js";import{_ as q,T as S}from"./Tab.586fe730.js";import{R as $}from"./routeHelper.f7d73c44.js";const x=l("div",{class:"hidden lg:block"},"big screen not supported yet",-1),E=l("thead",{class:"border-t-0"},null,-1),H={class:"bg-white"},L={class:"bg-white"},O=l("thead",{class:"border-t-0"},null,-1),z=l("thead",{class:"border-t-0"},null,-1),X=M({name:"RoutesPage",setup(G){const a=P();V(),D();const{accounts:T}=k(),B=new j(k()),u=f(),i=f(),F=f(0),_=e=>e?e.sort((t,o)=>+new Date(o.scheduledSampling)-+new Date(t.scheduledSampling)):[],b=()=>{a.selectedRoute=void 0,v.push("/scheduling")},I=e=>e?T.value.some(h=>h.username==e):!1,N=async e=>{F.value=e},g=async e=>{a.selectedRoute=e,v.push("/scheduling")};return a.$persistedState.isReady().then(async()=>{a.routes||(a.routes=await B.get("routes")),u.value=a.selectedRoute,i.value=a.routes}),(e,h)=>(r(),c(m,null,[x,s(p,{class:"lg:hidden"},{content:n(()=>[E,l("tbody",H,[u.value?(r(),R(d,{key:0,header:u.value.description,footer1:e.$t("Click here to deselect current route"),onRowClicked:b},null,8,["header","footer1"])):(r(),R(d,{key:1,header:e.$t("No route"),footer1:e.$t("Select a route below"),onRowClicked:b},null,8,["header","footer1"]))]),l("tbody",L,[s(q,{"selected-tab-index":0,classes:"justify-center mt-2 mb-2 pb-2",onSelectedTabChanged:N},{default:n(()=>[s(S,{title:e.$t("All routes")},{default:n(()=>[s(p,{class:"lg:hidden -mt-2"},{content:n(()=>[O,(r(!0),c(m,null,w(_(i.value),(t,o)=>(r(),c("tbody",{key:o,class:"bg-white"},[s(d,{header:t.description,footer1:y($).getInstance().routeFooter(t),clickable:!0,onRowClicked:A=>g(t)},null,8,["header","footer1","onRowClicked"])]))),128)),s(C)]),_:1})]),_:1},8,["title"]),s(S,{title:e.$t("My routes")},{default:n(()=>[s(p,{class:"lg:hidden"},{content:n(()=>[z,(r(!0),c(m,null,w(_(i.value).filter(t=>{var o;return I((o=t.sampleCollector)==null?void 0:o.email)}),(t,o)=>(r(),c("tbody",{key:o,class:"bg-white"},[s(d,{header:t.description,footer1:y($).getInstance().routeFooter(t),clickable:!0,onRowClicked:A=>g(t)},null,8,["header","footer1","onRowClicked"])]))),128)),s(C)]),_:1})]),_:1},8,["title"])]),_:1})])]),_:1})],64))}});export{X as default};
