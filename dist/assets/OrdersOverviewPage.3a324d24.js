import{o as r,x as b,m as t,_ as B,b as v,d as S,u as $,v as C,q as A,s as H,l as m,w as D,c as N,y as F,g as a,A as M,a as k,F as I,p as g,h as V,H as P}from"./index.54cedfa4.js";import{u as Z}from"./ordersStore.74b854f3.js";import{A as T,_ as R,a as L,P as U}from"./apiService.d80248fd.js";import{_ as E,T as z}from"./Tab.e9a17a66.js";function W(f,p){return r(),b("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM4.332 8.027a6.012 6.012 0 011.912-2.706C6.512 5.73 6.974 6 7.5 6A1.5 1.5 0 019 7.5V8a2 2 0 004 0 2 2 0 011.523-1.943A5.977 5.977 0 0116 10c0 .34-.028.675-.083 1H15a2 2 0 00-2 2v2.197A5.973 5.973 0 0110 16v-2a2 2 0 00-2-2 2 2 0 01-2-2 2 2 0 00-1.668-1.973z","clip-rule":"evenodd"})])}function Y(f,p){return r(),b("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[t("path",{"fill-rule":"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z","clip-rule":"evenodd"})])}function j(f,p){return r(),b("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[t("path",{"fill-rule":"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z","clip-rule":"evenodd"})])}const G={},q={type:"range",min:"1",max:"100",value:"0",class:"range-slider shadow",oninput:"valueChanged(this)"};function J(f,p){return r(),v("input",q)}var K=B(G,[["render",J],["__scopeId","data-v-a751c3c2"]]);const Q="M32 2C15.432 2 2 15.432 2 32c0 16.568 13.432 30 30 30s30-13.432 30-30C62 15.432 48.568 2 32 2zm6 46h-6.107V24.979c-2.232 2.086-4.863 3.629-7.893 4.629v-5.543c1.594-.521 3.326-1.512 5.195-2.967c1.871-1.455 3.152-3.156 3.848-5.098H38v32z",X="M 20 5 L 20 10.46875 L 17 12.25 L 17 9.21875 L 15.5 10.15625 L 12 12.25 L 12 9.21875 L 10.5 10.15625 L 5.5 13.15625 L 5 13.4375 L 5 27 L 27 27 L 27 5 Z M 22 7 L 25 7 L 25 25 L 7 25 L 7 14.53125 L 10 12.75 L 10 15.78125 L 11.5 14.84375 L 15 12.75 L 15 15.78125 L 16.5 14.84375 L 21.5 11.84375 L 22 11.5625 Z M 9 17 L 9 19 L 11 19 L 11 17 Z M 13 17 L 13 19 L 15 19 L 15 17 Z M 17 17 L 17 19 L 19 19 L 19 17 Z M 21 17 L 21 19 L 23 19 L 23 17 Z M 9 21 L 9 23 L 11 23 L 11 21 Z M 13 21 L 13 23 L 15 23 L 15 21 Z M 17 21 L 17 23 L 19 23 L 19 21 Z M 21 21 L 21 23 L 23 23 L 23 21 Z";var ee={NUMBER_1:Q,INDUSTRY:X};const te={class:"grid grid-cols-6 gap-7 items-center absolute w-full right-0 pt-1"},se={class:"col-span-4 flex"},oe={class:"justify-self-end"},ae=S({name:"OrdersOverview",props:{selectedRoute:null},emits:["mapIsReady","orderAdded","orderRemoved"],setup(f,{emit:p}){const n=f,l=new T($());C();const d=Z();A();const{t:s}=H(),x=m({lat:56.993048,lng:9.8212}),_=m();var u=m();const w=m(n.selectedRoute);D(()=>n.selectedRoute,(o,e)=>{w.value=o}),N(()=>{if(!u.value)return[];const o=u.value.map(e=>({id:e.orderId,position:{lat:e.latitude,lng:e.longitude},icon:c(e),clickable:!0,draggable:!1,infoWindow:{header:e.description,footer:s("Samples:")+" "+e.samples.map(h=>h.place).reduce((h,O)=>h+O.samplesCount,0),buttonText:e.routeOrderNo?s("Remove"):s("Add")}}));return console.log(o),o});function y(o,e){return String(o).padStart(e,"0")}const c=o=>o.routeOrderNo?"/images/markers/black"+y(o.routeOrderNo,2)+".png":{path:ee.INDUSTRY,scale:1,strokeColor:"black",strokeOpacity:.1,fillColor:"black",fillOpacity:1,anchor:{x:15,y:30}};d.$persistedState.isReady().then(async()=>{if(d.orders)u.value=d.orders;else{const o=await l.get("orders");u.value=o,d.orders=u.value}});const i=async()=>{_.value=null};return(o,e)=>{const h=F("GMapMap");return r(),v(I,null,[t(h,{class:"pb-2",center:x.value,zoom:9,options:{gestureHandling:"greedy"},"map-type-id":"terrain",onClick:i,onIdle:e[0]||(e[0]=O=>p("mapIsReady"))},null,8,["center"]),a("div",te,[a("button",null,[(r(),b(M(k(W)),{class:"text-indigo-600 w-6 h-6"}))]),a("div",se,[t(K,{class:"w-full"})]),a("button",oe,[(r(),b(M(k(j)),{class:"text-indigo-600 w-6 h-6"}))])])],64)}}});const re=a("div",{class:"hidden lg:block"},"big screen not supported yet",-1),ne={class:"bg-white"},le={key:0,class:"bg-white"},de=a("hr",{class:"border"},null,-1),ce=a("div",{class:"absolute ml-5 w-5"},[a("div",{class:"bg-gray-300 w-1 h-1 rounded-full mt-1 m-auto place-self-center"}),a("div",{class:"bg-gray-300 w-3 h-3 rounded-full mt-1 m-auto place-self-center"}),a("div",{style:{},class:"bg-gray-300 w-1 h-1 rounded-full mt-1 m-auto place-self-center"}),a("div",{class:"bg-gray-300 w-1 h-1 rounded-full mt-1 m-auto place-self-center"}),a("div",{class:"bg-gray-300 w-1 h-1 rounded-full mt-1 m-auto place-self-center"})],-1),ie=a("hr",{class:"border ml-6"},null,-1),ue={class:"absolute ml-5 w-5"},pe=a("div",{class:"bg-gray-300 w-1 h-1 rounded-full mt-1 m-auto place-self-center"},null,-1),ve=a("hr",{class:"border"},null,-1),fe={key:1,class:"bg-white"},he={class:"bg-white"},me=S({name:"RouteDetails",props:{selectedRoute:null},setup(f){const p=new T($());C();const n=A(),l=m(),d=N(()=>{var s;return(s=l.value)!=null&&s.waypoints?l.value.waypoints.length>0:!1});return n.$persistedState.isReady().then(async()=>{n.selectedRoute||p.get("routes/{}"),l.value=n.selectedRoute}),(s,x)=>(r(),v(I,null,[re,t(U,{class:"lg:hidden"},{content:g(()=>{var _,u;return[t(R,{title:s.$t("Route")},null,8,["title"]),a("tbody",ne,[t(L,{header:(_=l.value)==null?void 0:_.description,footer1:"Footer"},null,8,["header"])]),t(R,{title:s.$t("Directions")},null,8,["title"]),k(d)?(r(),v("tbody",le,[(r(!0),v(I,null,V((u=l.value)==null?void 0:u.waypoints,(w,y)=>(r(),v("div",{key:y},[de,t(L,{header:"First waypoint",footer1:"Address",footer2:"Samples collected","no-borders":!0,styles:"padding-left:1.5rem"},{default:g(()=>[ce]),_:1},8,["styles"])]))),128)),ie,t(L,{header:"Home",footer1:"Address","no-borders":!0,styles:"padding-left:1.5rem"},{default:g(()=>[a("div",ue,[pe,(r(),b(M(k(Y)),{class:"text-gray-300 w-5 h-5 mt-1 m-auto place-self-center"}))])]),_:1},8,["styles"]),ve])):(r(),v("tbody",fe,[t(L,{header:"No directions to show",footer1:"Add orders to the route in the overview"})])),t(R,{title:s.$t("Packaging")},null,8,["title"]),a("tbody",he,[t(L,{header:"First bottle",footer1:"description"})]),t(R)]}),_:1})],64))}}),_e={class:"w-screen max-w-full"},Le=S({name:"OrdersOverviewPage",setup(f){const p=P.exports.useLoading();C();const n=Z(),l=A();new T($());const d=m(0),s=m(),x=c=>{var o;const i=(o=n.orders)==null?void 0:o.filter(e=>e.orderId==c)[0];s.value&&i&&s.value.waypoints.push({orderId:i.orderId,contact:i.contact,lat:i.latitude,lon:i.longitude,places:i.samples.map(e=>e.place)})},_=c=>{var o;const i=(o=n.orders)==null?void 0:o.filter(e=>e.orderId==c)[0];if(s.value&&i){const e=s.value.waypoints.filter(h=>h.orderId==c);s.value.waypoints=e}};n.$persistedState.isReady().then(async()=>{n.selectedTabIndex&&(d.value=n.selectedTabIndex,n.selectedTabIndex=0)}),d.value=0,l.$persistedState.isReady().then(async()=>{l.selectedRoute&&(s.value=l.selectedRoute)});const u=async c=>{d.value=c},w=p.show({isFullPage:!0,loader:"dots",canCancel:!1});setTimeout(()=>{w.hide()},5e3);const y=async()=>{w.hide()};return(c,i)=>(r(),v("div",_e,[t(E,{"selected-tab-index":d.value,classes:"mb-2",onSelectedTabChanged:u},{default:g(()=>[t(z,{title:c.$t("Overview")},{default:g(()=>[t(ae,{"selected-route":s.value,onMapIsReady:y,onOrderAdded:x,onOrderRemoved:_},null,8,["selected-route"])]),_:1},8,["title"]),t(z,{title:c.$t("Route details")},{default:g(()=>[t(me,{"selected-route":s.value},null,8,["selected-route"])]),_:1},8,["title"])]),_:1},8,["selected-tab-index"])]))}});export{Le as default};
