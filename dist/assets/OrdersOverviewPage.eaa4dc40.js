import{o as a,x as k,m as o,d as N,l as w,b as _,g as e,t as O,_ as q,u as B,v as D,q as H,s as K,w as J,c as W,y as z,p as m,F as A,h as E,e as Q,a as M,A as Z,H as X,S as ee}from"./index.e70e57ae.js";import{u as U}from"./ordersStore.56252f67.js";import{A as F,_ as S,a as C,P as te}from"./apiService.1bc8ebf7.js";import{T as V,_ as re}from"./Tab.b17815cc.js";function oe(c,u){return a(),k("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[o("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM4.332 8.027a6.012 6.012 0 011.912-2.706C6.512 5.73 6.974 6 7.5 6A1.5 1.5 0 019 7.5V8a2 2 0 004 0 2 2 0 011.523-1.943A5.977 5.977 0 0116 10c0 .34-.028.675-.083 1H15a2 2 0 00-2 2v2.197A5.973 5.973 0 0110 16v-2a2 2 0 00-2-2 2 2 0 01-2-2 2 2 0 00-1.668-1.973z","clip-rule":"evenodd"})])}function se(c,u){return a(),k("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[o("path",{"fill-rule":"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z","clip-rule":"evenodd"})])}function ae(c,u){return a(),k("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[o("path",{"fill-rule":"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z","clip-rule":"evenodd"})])}const ne={class:"top-0 right-0 left-0 z-50 md:inset-0 h-modal md:h-full"},le={class:"relative w-full max-w-md h-full md:h-auto"},de={class:"p-2 text-left"},ie={class:"mb-2 text-lg font-bold text-gray-500 dark:text-gray-400"},ce={class:"mb-5 text-md font-normal text-gray-500 dark:text-gray-400"},ue={class:"text-center items-center pb-2 md:pb-0"},ve=N({name:"GMapDialog",props:{id:null,header:null,footer:null,buttonText:null},emits:["addRemoveOrderClicked","infoClicked"],setup(c,{emit:u}){const l=c,v=w(!0);function b(n){u("addRemoveOrderClicked",n),t(!1)}function t(n){v.value=n}return(n,f)=>{var p,d;return a(),_("div",ne,[e("div",le,[e("div",de,[e("h3",ie,O(n.$t((p=c.header)!=null?p:n.$t("(Empty)"))),1),e("p",ce,O(n.$t((d=c.footer)!=null?d:n.$t("(Empty)"))),1),e("div",ue,[e("button",{type:"button",class:"text-white bg-green-600 hover:bg-green-800 focus:ring-4 focus:outline-none focus:ring-green-300 dark:focus:ring-green-800 rounded-lg text-sm px-4 py-2 text-center mr-2",onClick:f[0]||(f[0]=g=>b(c.id))},O(l.buttonText),1),e("button",{type:"button",class:"md:mr-0 mr-2 text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-gray-200 rounded-lg border border-gray-200 text-sm px-4 py-2 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600",onClick:f[1]||(f[1]=g=>n.$emit("infoClicked",c.id))},O(n.$t("Info")),1)])])])])}}});const pe={},fe={type:"range",min:"1",max:"100",value:"0",class:"range-slider shadow",oninput:"valueChanged(this)"};function ge(c,u){return a(),_("input",fe)}var he=q(pe,[["render",ge],["__scopeId","data-v-a751c3c2"]]);const me="M32 2C15.432 2 2 15.432 2 32c0 16.568 13.432 30 30 30s30-13.432 30-30C62 15.432 48.568 2 32 2zm6 46h-6.107V24.979c-2.232 2.086-4.863 3.629-7.893 4.629v-5.543c1.594-.521 3.326-1.512 5.195-2.967c1.871-1.455 3.152-3.156 3.848-5.098H38v32z",be="M 20 5 L 20 10.46875 L 17 12.25 L 17 9.21875 L 15.5 10.15625 L 12 12.25 L 12 9.21875 L 10.5 10.15625 L 5.5 13.15625 L 5 13.4375 L 5 27 L 27 27 L 27 5 Z M 22 7 L 25 7 L 25 25 L 7 25 L 7 14.53125 L 10 12.75 L 10 15.78125 L 11.5 14.84375 L 15 12.75 L 15 15.78125 L 16.5 14.84375 L 21.5 11.84375 L 22 11.5625 Z M 9 17 L 9 19 L 11 19 L 11 17 Z M 13 17 L 13 19 L 15 19 L 15 17 Z M 17 17 L 17 19 L 19 19 L 19 17 Z M 21 17 L 21 19 L 23 19 L 23 17 Z M 9 21 L 9 23 L 11 23 L 11 21 Z M 13 21 L 13 23 L 15 23 L 15 21 Z M 17 21 L 17 23 L 19 23 L 19 21 Z M 21 21 L 21 23 L 23 23 L 23 21 Z";var _e={NUMBER_1:me,INDUSTRY:be};const ye={key:0},we={class:"grid grid-cols-6 gap-7 items-center absolute w-full right-0 pt-1"},ke={class:"col-span-4 flex"},xe={class:"justify-self-end"},Le=N({name:"OrdersOverview",props:{selectedRoute:null},emits:["mapIsReady","orderAdded","orderRemoved"],setup(c,{emit:u}){const l=c,v=new F(B()),b=D(),t=U();H();const{t:n}=K(),f=w({lat:56.993048,lng:9.8212}),p=w();var d=w();const g=w(l.selectedRoute),h="/slc/dist/";J(()=>l.selectedRoute,(s,r)=>{g.value=s});const x=W(()=>d.value?d.value.map(r=>({id:r.orderId,position:{lat:r.latitude,lng:r.longitude},icon:$(r),clickable:!0,draggable:!1,infoWindow:{header:r.description,footer:n("Samples:")+" "+r.samples.length,buttonText:r.routeOrderNo?n("Remove"):n("Add")}})):[]);function L(s,r){return String(s).padStart(r,"0")}const $=s=>s.routeOrderNo?h+"images/markers/black"+L(s.routeOrderNo,2)+".png":{path:_e.INDUSTRY,scale:1,strokeColor:"black",strokeOpacity:.1,fillColor:"black",fillOpacity:1,anchor:{x:15,y:30}};t.$persistedState.isReady().then(async()=>{if(t.orders)d.value=t.orders;else{const s=await v.get("orders");d.value=s,t.orders=d.value}});const T=async s=>{var I;let r=(I=d.value)==null?void 0:I.filter(R=>R.orderId==s)[0];if(r&&d.value&&g.value)if(r!=null&&r.routeOrderNo){r.routeOrderNo=void 0;let R=1;d.value.filter(y=>y.routeOrderNo).sort((y,i)=>y.routeOrderNo-i.routeOrderNo).forEach(y=>{y.routeOrderNo=R++}),g.value.orders=g.value.orders.filter(y=>y.orderId!=s),u("orderRemoved",s)}else r.routeOrderNo=g.value.orders.length+1,u("orderAdded",s);p.value=null},P=async s=>{b.push({name:"Order",params:{orderId:s.toString()}})},G=async()=>{p.value=null},Y=async(s,r)=>{p.value=s.id};return(s,r)=>{const I=z("GMapInfoWindow"),R=z("GMapMarker"),y=z("GMapMap");return a(),_(A,null,[o(y,{class:"pb-2",center:f.value,zoom:9,options:{gestureHandling:"greedy"},"map-type-id":"terrain",onClick:G,onIdle:r[0]||(r[0]=i=>u("mapIsReady"))},{default:m(()=>[(a(!0),_(A,null,E(M(x),(i,j)=>(a(),k(R,{key:j,position:i.position,clickable:i.clickable,draggable:i.draggable,icon:i.icon,onClick:He=>Y(i)},{default:m(()=>[p.value===i.id?(a(),_("div",ye,[o(I,{"v-if":p.value===i.id,closeclick:!0,onCloseclick:G},{default:m(()=>[o(ve,{id:i.id,header:i.infoWindow.header,footer:i.infoWindow.footer,"button-text":i.infoWindow.buttonText,onAddRemoveOrderClicked:T,onInfoClicked:P},null,8,["id","header","footer","button-text"])]),_:2},1032,["v-if"])])):Q("",!0)]),_:2},1032,["position","clickable","draggable","icon","onClick"]))),128))]),_:1},8,["center"]),e("div",we,[e("button",null,[(a(),k(Z(M(oe)),{class:"text-indigo-600 w-6 h-6"}))]),e("div",ke,[o(he,{class:"w-full"})]),e("button",xe,[(a(),k(Z(M(ae)),{class:"text-indigo-600 w-6 h-6"}))])])],64)}}});const $e=e("div",{class:"hidden lg:block"},"big screen not supported yet",-1),Re={class:"bg-white"},Ce={key:0,class:"bg-white"},Me=e("hr",{class:"border"},null,-1),Ie=e("div",{class:"absolute ml-5 w-5"},[e("div",{class:"bg-gray-300 w-1 h-1 rounded-full mt-1 m-auto place-self-center"}),e("div",{class:"bg-gray-300 w-3 h-3 rounded-full mt-1 m-auto place-self-center"}),e("div",{style:{},class:"bg-gray-300 w-1 h-1 rounded-full mt-1 m-auto place-self-center"}),e("div",{class:"bg-gray-300 w-1 h-1 rounded-full mt-1 m-auto place-self-center"}),e("div",{class:"bg-gray-300 w-1 h-1 rounded-full mt-1 m-auto place-self-center"})],-1),Oe=e("hr",{class:"border ml-6"},null,-1),Se={class:"absolute ml-5 w-5"},Ae=e("div",{class:"bg-gray-300 w-1 h-1 rounded-full mt-1 m-auto place-self-center"},null,-1),Ne=e("hr",{class:"border"},null,-1),Te={key:1,class:"bg-white"},ze={class:"bg-white"},Ze=N({name:"RouteDetails",props:{selectedRoute:null},setup(c){const u=new F(B());D();const l=H(),v=w(),b=W(()=>{var t;return(t=v.value)!=null&&t.orders?v.value.orders.length>0:!1});return l.$persistedState.isReady().then(async()=>{l.selectedRoute||u.get("routes/{}"),v.value=l.selectedRoute}),(t,n)=>(a(),_(A,null,[$e,o(te,{class:"lg:hidden"},{content:m(()=>{var f,p;return[o(S,{title:t.$t("Route")},null,8,["title"]),e("tbody",Re,[o(C,{header:(f=v.value)==null?void 0:f.description,footer1:"Footer"},null,8,["header"])]),o(S,{title:t.$t("Directions")},null,8,["title"]),M(b)?(a(),_("tbody",Ce,[(a(!0),_(A,null,E((p=v.value)==null?void 0:p.orders,(d,g)=>(a(),_("div",{key:g},[Me,o(C,{header:"First waypoint",footer1:"Address",footer2:"Samples collected","no-borders":!0,styles:"padding-left:1.5rem"},{default:m(()=>[Ie]),_:1},8,["styles"])]))),128)),Oe,o(C,{header:"Home",footer1:"Address","no-borders":!0,styles:"padding-left:1.5rem"},{default:m(()=>[e("div",Se,[Ae,(a(),k(Z(M(se)),{class:"text-gray-300 w-5 h-5 mt-1 m-auto place-self-center"}))])]),_:1},8,["styles"]),Ne])):(a(),_("tbody",Te,[o(C,{header:"No directions to show",footer1:"Add orders to the route in the overview"})])),o(S,{title:t.$t("Packaging")},null,8,["title"]),e("tbody",ze,[o(C,{header:"First bottle",footer1:"description"})]),o(S)]}),_:1})],64))}}),Be=e("div",null,"FALLBACK",-1),De={class:"w-screen max-w-full"},Ee=N({name:"OrdersOverviewPage",setup(c){const u=X.exports.useLoading();D();const l=U(),v=H();new F(B());const b=w(0),t=w(),n=h=>{var L;const x=(L=l.orders)==null?void 0:L.filter($=>$.orderId==h)[0];t.value&&x&&t.value.orders.push(x)},f=h=>{var L;const x=(L=l.orders)==null?void 0:L.filter($=>$.orderId==h)[0];if(t.value&&x){const $=t.value.orders.filter(T=>T.orderId!=h);t.value.orders=$}};l.$persistedState.isReady().then(async()=>{l.selectedTabIndex&&(b.value=l.selectedTabIndex,l.selectedTabIndex=0)}),b.value=0,v.$persistedState.isReady().then(async()=>{v.selectedRoute&&(t.value=v.selectedRoute)});const p=async h=>{b.value=h},d=u.show({isFullPage:!0,loader:"dots",canCancel:!1});setTimeout(()=>{d.hide()},5e3);const g=async()=>{d.hide()};return(h,x)=>(a(),k(ee,null,{fallback:m(()=>[Be]),default:m(()=>[e("div",De,[o(re,{"selected-tab-index":b.value,classes:"mb-2",onSelectedTabChanged:p},{default:m(()=>[o(V,{title:h.$t("Overview")},{default:m(()=>[o(Le,{"selected-route":t.value,onMapIsReady:g,onOrderAdded:n,onOrderRemoved:f},null,8,["selected-route"])]),_:1},8,["title"]),o(V,{title:h.$t("Route details")},{default:m(()=>[o(Ze,{"selected-route":t.value},null,8,["selected-route"])]),_:1},8,["title"])]),_:1},8,["selected-tab-index"])])]),_:1}))}});export{Ee as default};
