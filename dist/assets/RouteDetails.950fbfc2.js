import{o,x as c,m as l,d as I,u as N,v as z,q as D,l as L,c as M,b as r,p as g,F as a,g as e,a as v,h as C,A as O,e as P}from"./index.24c7f104.js";import{A as V,_ as u,a as n,P as H}from"./apiService.b774ef7c.js";import{R as $}from"./routeHelper.00543cbe.js";function T(m,p){return o(),c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[l("path",{"fill-rule":"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z","clip-rule":"evenodd"})])}const U=e("div",{class:"hidden lg:block"},"big screen not supported yet",-1),j={class:"bg-white"},q={class:"bg-white"},E={key:0,class:"bg-white"},G=e("hr",{class:"border"},null,-1),J=e("div",{class:"absolute ml-5 w-5"},[e("div",{class:"bg-gray-300 w-1 h-1 rounded-full mt-1 m-auto place-self-center"}),e("div",{class:"bg-gray-300 w-3 h-3 rounded-full mt-1 m-auto place-self-center"}),e("div",{style:{},class:"bg-gray-300 w-1 h-1 rounded-full mt-1 m-auto place-self-center"}),e("div",{class:"bg-gray-300 w-1 h-1 rounded-full mt-1 m-auto place-self-center"}),e("div",{class:"bg-gray-300 w-1 h-1 rounded-full mt-1 m-auto place-self-center"})],-1),K=e("hr",{class:"border ml-6"},null,-1),Q={class:"absolute ml-5 w-5"},W=e("div",{class:"bg-gray-300 w-1 h-1 rounded-full mt-1 m-auto place-self-center"},null,-1),X=e("hr",{class:"border"},null,-1),Y={key:1,class:"bg-white"},Z={class:"bg-white"},le=I({name:"RouteDetails",props:{selectedRoute:null,showUnsavedRoute:{type:Boolean},editable:{type:Boolean}},emits:["routeSelected"],setup(m,{emit:p}){const y=m,S=new V(N()),x=z(),h=D(),t=L(),B=async s=>{x.push({name:"Order",params:{orderId:s.toString()}})},A=s=>{t.value&&(t.value.description=s,t.value.pristine=!1)},F=M(()=>{var s;return(s=t.value)!=null&&s.orders?t.value.orders.length>0:!1});return h.$persistedState.isReady().then(async()=>{h.selectedRoute||S.get("routes/{}"),t.value=h.selectedRoute}),(s,d)=>(o(),r(a,null,[U,l(H,{class:"lg:hidden"},{content:g(()=>{var b,w,k,_,R;return[!y.showUnsavedRoute&&((b=t.value)==null?void 0:b.pristine)?(o(),r(a,{key:0},[l(u,{title:s.$t("Route")},null,8,["title"]),e("tbody",j,[l(n,{clickable:!0,header:s.$t("No route"),footer1:s.$t("Click here to select a route"),onRowClicked:d[0]||(d[0]=i=>p("routeSelected"))},null,8,["header","footer1"])])],64)):(o(),r(a,{key:1},[l(u,{title:s.$t("Route")},null,8,["title"]),e("tbody",q,[y.editable?(o(),c(n,{key:0,"text-input":(w=t.value)==null?void 0:w.description,footer1:v($).getInstance().routeFooter(t.value),onRowClicked:d[1]||(d[1]=i=>p("routeSelected")),onTextInputChanged:A},null,8,["text-input","footer1"])):(o(),c(n,{key:1,clickable:!0,header:(k=t.value)==null?void 0:k.description,footer1:v($).getInstance().routeFooter(t.value),onRowClicked:d[2]||(d[2]=i=>p("routeSelected"))},null,8,["header","footer1"]))]),l(u,{title:s.$t("Directions")},null,8,["title"]),v(F)?(o(),r("tbody",E,[(o(!0),r(a,null,C(t.value.orders,(i,f)=>(o(),r(a,{key:f},[G,l(n,{clickable:!0,header:"First waypoint",footer1:"Address",footer2:"Samples collected","no-borders":!0,styles:"padding-left:1.5rem",onRowClicked:ee=>B(i.orderId)},{default:g(()=>[J]),_:2},1032,["styles","onRowClicked"])],64))),128)),K,l(n,{header:"Home",footer1:"Address","no-borders":!0,styles:"padding-left:1.5rem"},{default:g(()=>[e("div",Q,[W,(o(),c(O(v(T)),{class:"text-gray-300 w-5 h-5 mt-1 m-auto place-self-center"}))])]),_:1},8,["styles"]),X])):(o(),r("tbody",Y,[l(n,{header:"No directions to show",footer1:"Add orders to the route in the overview"})])),(_=t.value)!=null&&_.packaging?(o(),r(a,{key:2},[l(u,{title:s.$t("Packaging")},null,8,["title"]),e("tbody",Z,[(o(!0),r(a,null,C((R=t.value)==null?void 0:R.packaging,(i,f)=>(o(),c(n,{key:f,header:"First bottle",footer1:"description"}))),128))])],64)):P("",!0),l(u)],64))]}),_:1})],64))}});export{le as _};
