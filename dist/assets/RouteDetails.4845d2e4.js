var z=Object.defineProperty;var D=(n,o,r)=>o in n?z(n,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[o]=r;var C=(n,o,r)=>(D(n,typeof o!="symbol"?o+"":o,r),r);import{o as s,x as b,m as a,d as V,u as L,v as M,q as O,l as P,c as U,b as i,p as R,F as u,g as t,a as k,h as $,A as H,e as T}from"./index.0aeca6e2.js";import{A as j,_ as y,a as c,P as q}from"./apiService.f12ef6bf.js";import{R as S}from"./routeHelper.0d43e779.js";function E(n,o){return s(),b("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[a("path",{"fill-rule":"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z","clip-rule":"evenodd"})])}class x{}C(x,"uuidv4",()=>(""+[1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,o=>{const r=Number(o);return(r^crypto.getRandomValues(new Uint8Array(1))[0]&15>>r/4).toString(16)}));const G=t("div",{class:"hidden lg:block"},"big screen not supported yet",-1),J={class:"bg-white"},K={class:"bg-white"},Q={key:0,class:"bg-white"},W=t("hr",{class:"border"},null,-1),X=t("div",{class:"absolute ml-5 w-5"},[t("div",{class:"bg-gray-300 w-1 h-1 rounded-full mt-1 m-auto place-self-center"}),t("div",{class:"bg-gray-300 w-3 h-3 rounded-full mt-1 m-auto place-self-center"}),t("div",{style:{},class:"bg-gray-300 w-1 h-1 rounded-full mt-1 m-auto place-self-center"}),t("div",{class:"bg-gray-300 w-1 h-1 rounded-full mt-1 m-auto place-self-center"}),t("div",{class:"bg-gray-300 w-1 h-1 rounded-full mt-1 m-auto place-self-center"})],-1),Y=t("hr",{class:"border ml-6"},null,-1),Z={class:"absolute ml-5 w-5"},ee=t("div",{class:"bg-gray-300 w-1 h-1 rounded-full mt-1 m-auto place-self-center"},null,-1),te=t("hr",{class:"border"},null,-1),oe={key:1,class:"bg-white"},se={class:"bg-white"},ie=V({name:"RouteDetails",props:{selectedRoute:null,showUnsavedRoute:{type:Boolean},editable:{type:Boolean}},emits:["routeSelected"],setup(n,{emit:o}){const r=n,A=new j(L()),B=M(),v=O(),e=P(),F=async l=>{B.push({name:"Order",params:{orderId:l.toString()}})},I=l=>{var d,p,f;if(e.value)if(e.value.description=l,!e.value.guid)e.value.guid=x.uuidv4(),(d=v.routes)==null||d.push(e.value);else{const h=(p=v.routes)==null?void 0:p.findIndex(w=>{var g;return w.guid==((g=e.value)==null?void 0:g.guid)});h&&((f=v.routes)==null||f.splice(h,1,e.value))}},N=U(()=>{var l;return(l=e.value)!=null&&l.orders?e.value.orders.length>0:!1});return v.$persistedState.isReady().then(async()=>{v.selectedRoute||A.get("routes/{}"),e.value=v.selectedRoute}),(l,d)=>(s(),i(u,null,[G,a(q,{class:"lg:hidden"},{content:R(()=>{var p,f,h,w,g;return[!r.showUnsavedRoute&&((p=e.value)==null?void 0:p.guid)?(s(),i(u,{key:0},[a(y,{title:l.$t("Route")},null,8,["title"]),t("tbody",J,[a(c,{clickable:!0,header:l.$t("No route"),footer1:l.$t("Click here to select a route"),onRowClicked:d[0]||(d[0]=m=>o("routeSelected"))},null,8,["header","footer1"])])],64)):(s(),i(u,{key:1},[a(y,{title:l.$t("Route")},null,8,["title"]),t("tbody",K,[r.editable?(s(),b(c,{key:0,"text-input":(f=e.value)==null?void 0:f.description,footer1:k(S).getInstance().routeFooter(e.value),onRowClicked:d[1]||(d[1]=m=>o("routeSelected")),onTextInputChanged:I},null,8,["text-input","footer1"])):(s(),b(c,{key:1,clickable:!0,header:(h=e.value)==null?void 0:h.description,footer1:k(S).getInstance().routeFooter(e.value),onRowClicked:d[2]||(d[2]=m=>o("routeSelected"))},null,8,["header","footer1"]))]),a(y,{title:l.$t("Directions")},null,8,["title"]),k(N)?(s(),i("tbody",Q,[(s(!0),i(u,null,$(e.value.orders,(m,_)=>(s(),i(u,{key:_},[W,a(c,{clickable:!0,header:"First waypoint",footer1:"Address",footer2:"Samples collected","no-borders":!0,styles:"padding-left:1.5rem",onRowClicked:le=>F(m.orderId)},{default:R(()=>[X]),_:2},1032,["styles","onRowClicked"])],64))),128)),Y,a(c,{header:"Home",footer1:"Address","no-borders":!0,styles:"padding-left:1.5rem"},{default:R(()=>[t("div",Z,[ee,(s(),b(H(k(E)),{class:"text-gray-300 w-5 h-5 mt-1 m-auto place-self-center"}))])]),_:1},8,["styles"]),te])):(s(),i("tbody",oe,[a(c,{header:"No directions to show",footer1:"Add orders to the route in the overview"})])),(w=e.value)!=null&&w.packaging?(s(),i(u,{key:2},[a(y,{title:l.$t("Packaging")},null,8,["title"]),t("tbody",se,[(s(!0),i(u,null,$((g=e.value)==null?void 0:g.packaging,(m,_)=>(s(),b(c,{key:_,header:"First bottle",footer1:"description"}))),128))])],64)):T("",!0),a(y)],64))]}),_:1})],64))}});export{ie as _};
